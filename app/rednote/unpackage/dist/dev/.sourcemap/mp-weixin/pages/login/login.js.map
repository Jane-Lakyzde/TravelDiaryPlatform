{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../../biji/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <view class=\"login-card\">\r\n      <view class=\"card-header\">\r\n        <text class=\"header-text\">登录</text>\r\n      </view>\r\n      \r\n      <view class=\"login-form\">\r\n        <view class=\"form-item\">\r\n          <picker \r\n            :value=\"roleIndex\" \r\n            :range=\"roles\" \r\n            range-key=\"label\"\r\n            @change=\"handleRoleChange\"\r\n            class=\"role-picker\"\r\n          >\r\n            <view class=\"picker-content\">\r\n              <text>{{ formInline.role ? roles[roleIndex].label : '请选择登录身份' }}</text>\r\n              <text class=\"iconfont icon-arrow-down\"></text>\r\n            </view>\r\n          </picker>\r\n        </view>\r\n\r\n        <view class=\"form-item\">\r\n          <input \r\n            v-model=\"formInline.username\" \r\n            placeholder=\"请输入用户名\"\r\n            class=\"form-input\"\r\n            :maxlength=\"20\"\r\n          />\r\n        </view>\r\n\r\n        <view class=\"form-item\">\r\n          <input \r\n            v-model=\"formInline.password\" \r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            class=\"form-input\"\r\n            :maxlength=\"20\"\r\n            password\r\n          />\r\n        </view>\r\n\r\n        <button class=\"login-btn\" @tap=\"handleLogin\">登录</button>\r\n      </view>\r\n\r\n      <view class=\"register-link\">\r\n        <text>还没有账号？</text>\r\n        <text class=\"link\" @tap=\"goToRegister\">立即注册</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\n\r\nconst formInline = ref({\r\n  username: '',\r\n  password: '',\r\n  role: ''\r\n})\r\n\r\nconst roles = [\r\n  { label: '用户', value: 'user' },\r\n  { label: '管理员', value: 'admin' }\r\n]\r\n\r\nconst roleIndex = ref(0)\r\n\r\nconst handleRoleChange = (e) => {\r\n  roleIndex.value = e.detail.value\r\n  formInline.value.role = roles[roleIndex.value].value\r\n}\r\n\r\nconst handleLogin = async () => {\r\n  // 表单验证\r\n  if (!formInline.value.role) {\r\n    uni.showToast({\r\n      title: '请选择登录身份',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (!formInline.value.username) {\r\n    uni.showToast({\r\n      title: '请输入用户名',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (formInline.value.username.length < 3) {\r\n    uni.showToast({\r\n      title: '用户名长度不能小于3个字符',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (!formInline.value.password) {\r\n    uni.showToast({\r\n      title: '请输入密码',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (formInline.value.password.length < 6) {\r\n    uni.showToast({\r\n      title: '密码长度不能小于6个字符',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n\r\n  try {\r\n    // 这里添加登录API调用\r\n    // const res = await login(formInline.value)\r\n    \r\n    uni.showToast({\r\n      title: '登录成功',\r\n      icon: 'success'\r\n    })\r\n    \r\n    // 根据角色跳转到不同页面\r\n    if (formInline.value.role === 'admin') {\r\n      uni.reLaunch({\r\n        url: '/pages/admin/pending'\r\n      })\r\n    } else {\r\n      uni.reLaunch({\r\n        url: `/pages/user/home?username=${formInline.value.username}`\r\n      })\r\n    }\r\n  } catch (err) {\r\n    uni.showToast({\r\n      title: err.message || '登录失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nconst goToRegister = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/login/register'\r\n  })\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #f5f7fa;\r\n  padding: 30rpx;\r\n}\r\n\r\n.login-card {\r\n  width: 100%;\r\n  max-width: 800rpx;\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n  border: 6rpx solid #000000;\r\n}\r\n\r\n.card-header {\r\n  padding: 40rpx;\r\n  text-align: center;\r\n  border-bottom: 2rpx solid #eeeeee;\r\n}\r\n\r\n.header-text {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n.login-form {\r\n  padding: 40rpx;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.role-picker {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.picker-content {\r\n  height: 88rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 32rpx;\r\n  color: #333333;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 32rpx;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  line-height: 88rpx;\r\n  background-color: #007AFF;\r\n  color: #ffffff;\r\n  font-size: 32rpx;\r\n  border-radius: 44rpx;\r\n  margin-top: 40rpx;\r\n}\r\n\r\n.register-link {\r\n  text-align: center;\r\n  padding: 30rpx;\r\n  font-size: 28rpx;\r\n  color: #666666;\r\n}\r\n\r\n.link {\r\n  color: #007AFF;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n/* 图标字体 */\r\n@font-face {\r\n  font-family: 'iconfont';\r\n  src: url('//at.alicdn.com/t/font_xxx.woff2') format('woff2');\r\n}\r\n\r\n.iconfont {\r\n  font-family: 'iconfont';\r\n}\r\n\r\n.icon-arrow-down:before { content: '\\e6e9'; }\r\n</style>","import MiniProgramPage from 'D:/gamee_js/app/rednote/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":";;;;;AAyDA,UAAM,aAAaA,cAAAA,IAAI;AAAA,MACrB,UAAU;AAAA,MACV,UAAU;AAAA,MACV,MAAM;AAAA,IACR,CAAC;AAED,UAAM,QAAQ;AAAA,MACZ,EAAE,OAAO,MAAM,OAAO,OAAQ;AAAA,MAC9B,EAAE,OAAO,OAAO,OAAO,QAAS;AAAA,IAClC;AAEA,UAAM,YAAYA,cAAG,IAAC,CAAC;AAEvB,UAAM,mBAAmB,CAAC,MAAM;AAC9B,gBAAU,QAAQ,EAAE,OAAO;AAC3B,iBAAW,MAAM,OAAO,MAAM,UAAU,KAAK,EAAE;AAAA,IACjD;AAEA,UAAM,cAAc,YAAY;AAE9B,UAAI,CAAC,WAAW,MAAM,MAAM;AAC1BC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI,CAAC,WAAW,MAAM,UAAU;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI,WAAW,MAAM,SAAS,SAAS,GAAG;AACxCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI,CAAC,WAAW,MAAM,UAAU;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI,WAAW,MAAM,SAAS,SAAS,GAAG;AACxCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI;AAIFA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAGD,YAAI,WAAW,MAAM,SAAS,SAAS;AACrCA,wBAAAA,MAAI,SAAS;AAAA,YACX,KAAK;AAAA,UACb,CAAO;AAAA,QACP,OAAW;AACLA,wBAAAA,MAAI,SAAS;AAAA,YACX,KAAK,6BAA6B,WAAW,MAAM,QAAQ;AAAA,UACnE,CAAO;AAAA,QACF;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,IAAI,WAAW;AAAA,UACtB,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;ACnJA,GAAG,WAAWC,SAAe;"}