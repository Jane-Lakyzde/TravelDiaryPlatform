{"version":3,"file":"post.js","sources":["pages/user/post.vue","../../../biji/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9wb3N0LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"post-container\">\r\n    <view class=\"header\">\r\n      <view class=\"header-left\">\r\n        <button class=\"btn-text\" @tap=\"handleCancel\">取消</button>\r\n      </view>\r\n      <view class=\"header-title\">发布帖子</view>\r\n      <view class=\"header-right\">\r\n        <button \r\n          class=\"btn-primary\" \r\n          @tap=\"handlePublish\" \r\n          :disabled=\"!canPublish\"\r\n        >\r\n          发布\r\n        </button>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"post-content\">\r\n      <view class=\"post-editor\">\r\n        <textarea\r\n          v-model=\"postContent\"\r\n          class=\"post-textarea\"\r\n          placeholder=\"分享你的想法...\"\r\n          maxlength=\"500\"\r\n          :show-confirm-bar=\"false\"\r\n          :cursor-spacing=\"20\"\r\n        />\r\n        <view class=\"word-count\">{{ postContent.length }}/500</view>\r\n      </view>\r\n\r\n      <view class=\"image-uploader\">\r\n        <view class=\"upload-title\">添加图片</view>\r\n        <view class=\"image-list\">\r\n          <view \r\n            v-for=\"(image, index) in imageList\" \r\n            :key=\"index\" \r\n            class=\"image-item\"\r\n          >\r\n            <image \r\n              :src=\"image.url\" \r\n              mode=\"aspectFill\" \r\n              class=\"preview-image\"\r\n            />\r\n            <view class=\"delete-btn\" @tap=\"handleImageRemove(index)\">\r\n              <text class=\"iconfont icon-close\"></text>\r\n            </view>\r\n          </view>\r\n          <view \r\n            v-if=\"imageList.length < 9\" \r\n            class=\"upload-btn\"\r\n            @tap=\"chooseImage\"\r\n          >\r\n            <text class=\"iconfont icon-plus\"></text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"post-options\">\r\n        <view class=\"option-item\">\r\n          <switch \r\n            :checked=\"allowComments\" \r\n            @change=\"allowComments = $event.detail.value\"\r\n            color=\"#007AFF\"\r\n          />\r\n          <text class=\"option-label\">允许评论</text>\r\n        </view>\r\n        <view class=\"option-item\">\r\n          <switch \r\n            :checked=\"showLocation\" \r\n            @change=\"showLocation = $event.detail.value\"\r\n            color=\"#007AFF\"\r\n          />\r\n          <text class=\"option-label\">显示位置</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\n\r\nconst postContent = ref('')\r\nconst imageList = ref([])\r\nconst allowComments = ref(true)\r\nconst showLocation = ref(false)\r\n\r\nconst canPublish = computed(() => {\r\n  return postContent.value.trim().length > 0 || imageList.value.length > 0\r\n})\r\n\r\nconst chooseImage = () => {\r\n  uni.chooseImage({\r\n    count: 9 - imageList.value.length,\r\n    sizeType: ['compressed'],\r\n    sourceType: ['album', 'camera'],\r\n    success: (res) => {\r\n      const tempFiles = res.tempFilePaths.map(path => ({\r\n        url: path,\r\n        // 这里可以添加上传逻辑\r\n      }))\r\n      imageList.value.push(...tempFiles)\r\n    }\r\n  })\r\n}\r\n\r\nconst handleImageRemove = (index) => {\r\n  imageList.value.splice(index, 1)\r\n}\r\n\r\nconst handlePublish = () => {\r\n  if (!canPublish.value) return\r\n  \r\n  uni.showLoading({\r\n    title: '发布中...'\r\n  })\r\n  \r\n  // 这里添加发布逻辑\r\n  console.log('发布帖子:', {\r\n    content: postContent.value,\r\n    images: imageList.value,\r\n    allowComments: allowComments.value,\r\n    showLocation: showLocation.value\r\n  })\r\n  \r\n  // 模拟发布成功\r\n  setTimeout(() => {\r\n    uni.hideLoading()\r\n    uni.showToast({\r\n      title: '发布成功',\r\n      icon: 'success',\r\n      duration: 2000\r\n    })\r\n    setTimeout(() => {\r\n      uni.navigateBack()\r\n    }, 2000)\r\n  }, 1500)\r\n}\r\n\r\nconst handleCancel = () => {\r\n  uni.showModal({\r\n    title: '提示',\r\n    content: '确定要放弃编辑吗？',\r\n    success: (res) => {\r\n      if (res.confirm) {\r\n        uni.navigateBack()\r\n      }\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style>\r\n.post-container {\r\n  min-height: 100vh;\r\n  background-color: #ffffff;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  border-bottom: 1rpx solid #eeeeee;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: #ffffff;\r\n  z-index: 100;\r\n}\r\n\r\n.header-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n.btn-text {\r\n  font-size: 28rpx;\r\n  color: #666666;\r\n  background: none;\r\n  border: none;\r\n  padding: 0;\r\n}\r\n\r\n.btn-primary {\r\n  font-size: 28rpx;\r\n  color: #ffffff;\r\n  background-color: #007AFF;\r\n  border: none;\r\n  padding: 10rpx 30rpx;\r\n  border-radius: 30rpx;\r\n}\r\n\r\n.btn-primary[disabled] {\r\n  background-color: #cccccc;\r\n  color: #ffffff;\r\n}\r\n\r\n.post-content {\r\n  margin-top: 100rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.post-editor {\r\n  margin-bottom: 40rpx;\r\n  position: relative;\r\n}\r\n\r\n.post-textarea {\r\n  width: 100%;\r\n  height: 200rpx;\r\n  padding: 20rpx;\r\n  font-size: 28rpx;\r\n  line-height: 1.5;\r\n  background-color: #f5f5f5;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.word-count {\r\n  position: absolute;\r\n  right: 20rpx;\r\n  bottom: 20rpx;\r\n  font-size: 24rpx;\r\n  color: #999999;\r\n}\r\n\r\n.image-uploader {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.upload-title {\r\n  font-size: 28rpx;\r\n  color: #666666;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.image-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20rpx;\r\n}\r\n\r\n.image-item {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  position: relative;\r\n}\r\n\r\n.preview-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.delete-btn {\r\n  position: absolute;\r\n  top: -20rpx;\r\n  right: -20rpx;\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.delete-btn text {\r\n  color: #ffffff;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.upload-btn {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.upload-btn text {\r\n  font-size: 48rpx;\r\n  color: #999999;\r\n}\r\n\r\n.post-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n  padding: 30rpx 0;\r\n  border-top: 1rpx solid #eeeeee;\r\n}\r\n\r\n.option-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n}\r\n\r\n.option-label {\r\n  font-size: 28rpx;\r\n  color: #333333;\r\n}\r\n\r\n/* 图标字体 */\r\n@font-face {\r\n  font-family: 'iconfont';\r\n  src: url('//at.alicdn.com/t/font_xxx.woff2') format('woff2');\r\n}\r\n\r\n.iconfont {\r\n  font-family: 'iconfont';\r\n}\r\n\r\n.icon-plus:before { content: '\\e6da'; }\r\n.icon-close:before { content: '\\e6e7'; }\r\n</style>\r\n  ","import MiniProgramPage from 'D:/gamee_js/app/rednote/pages/user/post.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","MiniProgramPage"],"mappings":";;;;;AAmFA,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,gBAAgBA,cAAG,IAAC,IAAI;AAC9B,UAAM,eAAeA,cAAG,IAAC,KAAK;AAE9B,UAAM,aAAaC,cAAQ,SAAC,MAAM;AAChC,aAAO,YAAY,MAAM,OAAO,SAAS,KAAK,UAAU,MAAM,SAAS;AAAA,IACzE,CAAC;AAED,UAAM,cAAc,MAAM;AACxBC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO,IAAI,UAAU,MAAM;AAAA,QAC3B,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,gBAAM,YAAY,IAAI,cAAc,IAAI,WAAS;AAAA,YAC/C,KAAK;AAAA;AAAA,UAEb,EAAQ;AACF,oBAAU,MAAM,KAAK,GAAG,SAAS;AAAA,QAClC;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,oBAAoB,CAAC,UAAU;AACnC,gBAAU,MAAM,OAAO,OAAO,CAAC;AAAA,IACjC;AAEA,UAAM,gBAAgB,MAAM;AAC1B,UAAI,CAAC,WAAW;AAAO;AAEvBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACX,CAAG;AAGDA,oBAAAA,MAAA,MAAA,OAAA,8BAAY,SAAS;AAAA,QACnB,SAAS,YAAY;AAAA,QACrB,QAAQ,UAAU;AAAA,QAClB,eAAe,cAAc;AAAA,QAC7B,cAAc,aAAa;AAAA,MAC/B,CAAG;AAGD,iBAAW,MAAM;AACfA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAChB,CAAK;AACD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,aAAc;AAAA,QACnB,GAAE,GAAI;AAAA,MACR,GAAE,IAAI;AAAA,IACT;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACfA,0BAAAA,MAAI,aAAc;AAAA,UACnB;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrJA,GAAG,WAAWC,SAAe;"}