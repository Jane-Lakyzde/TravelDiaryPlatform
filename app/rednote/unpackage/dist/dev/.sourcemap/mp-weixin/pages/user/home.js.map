{"version":3,"file":"home.js","sources":["pages/user/home.vue","../../../../biji/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9ob21lLnZ1ZQ"],"sourcesContent":["<!-- pages/user/home.vue -->\r\n<template>\r\n  <view class=\"home-container\">\r\n    <!-- 顶部导航栏 -->\r\n    <view class=\"header\">\r\n      <view class=\"nav-left\">\r\n        <input\r\n          v-model=\"searchText\"\r\n          placeholder=\"搜索帖子\"\r\n          class=\"search-input\"\r\n          @confirm=\"handleSearch\"\r\n        />\r\n      </view>\r\n      <view class=\"nav-right\">\r\n        <button type=\"primary\" @tap=\"handleCreatePost\" class=\"post-btn\">\r\n          <text class=\"iconfont icon-plus\"></text>发帖\r\n        </button>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"posts-container\">\r\n      <view class=\"posts-grid\">\r\n        <!-- 左侧帖子列表 -->\r\n        <view class=\"posts-column\">\r\n          <view v-for=\"post in leftPosts\" :key=\"post.id\" class=\"post-card\">\r\n            <view class=\"post-header\">\r\n              <image :src=\"post.avatar\" class=\"avatar\" mode=\"aspectFill\" />\r\n              <view class=\"user-info\">\r\n                <text class=\"username\">{{ post.username }}</text>\r\n                <text class=\"post-time\">{{ post.time }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"post-content\">\r\n              <text class=\"post-text\">{{ post.content }}</text>\r\n              <view class=\"image-list\">\r\n                <image\r\n                  v-for=\"(image, index) in post.images\"\r\n                  :key=\"index\"\r\n                  :src=\"image\"\r\n                  class=\"post-image\"\r\n                  mode=\"aspectFill\"\r\n                  @tap=\"previewImage(post.images, index)\"\r\n                />\r\n              </view>\r\n            </view>\r\n            <view class=\"post-actions\">\r\n              <button\r\n                :class=\"['action-btn', post.isLiked ? 'active' : '']\"\r\n                @tap=\"handleLike(post)\"\r\n              >\r\n                <text class=\"iconfont icon-star\"></text>\r\n                <text>{{ post.likes }}</text>\r\n              </button>\r\n              <button class=\"action-btn\" @tap=\"handleComment(post)\">\r\n                <text class=\"iconfont icon-comment\"></text>\r\n                <text>{{ post.comments }}</text>\r\n              </button>\r\n              <button class=\"action-btn\" @tap=\"handleShare(post)\">\r\n                <text class=\"iconfont icon-share\"></text>\r\n                <text>分享</text>\r\n              </button>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- 右侧帖子列表 -->\r\n        <view class=\"posts-column\">\r\n          <view v-for=\"post in rightPosts\" :key=\"post.id\" class=\"post-card\">\r\n            <view class=\"post-header\">\r\n              <image :src=\"post.avatar\" class=\"avatar\" mode=\"aspectFill\" />\r\n              <view class=\"user-info\">\r\n                <text class=\"username\">{{ post.username }}</text>\r\n                <text class=\"post-time\">{{ post.time }}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"post-content\">\r\n              <text class=\"post-text\">{{ post.content }}</text>\r\n              <view class=\"image-list\">\r\n                <image\r\n                  v-for=\"(image, index) in post.images\"\r\n                  :key=\"index\"\r\n                  :src=\"image\"\r\n                  class=\"post-image\"\r\n                  mode=\"aspectFill\"\r\n                  @tap=\"previewImage(post.images, index)\"\r\n                />\r\n              </view>\r\n            </view>\r\n            <view class=\"post-actions\">\r\n              <button\r\n                :class=\"['action-btn', post.isLiked ? 'active' : '']\"\r\n                @tap=\"handleLike(post)\"\r\n              >\r\n                <text class=\"iconfont icon-star\"></text>\r\n                <text>{{ post.likes }}</text>\r\n              </button>\r\n              <button class=\"action-btn\" @tap=\"handleComment(post)\">\r\n                <text class=\"iconfont icon-comment\"></text>\r\n                <text>{{ post.comments }}</text>\r\n              </button>\r\n              <button class=\"action-btn\" @tap=\"handleShare(post)\">\r\n                <text class=\"iconfont icon-share\"></text>\r\n                <text>分享</text>\r\n              </button>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { initialPosts } from '../../data/posts.js'\r\n\r\nconst searchText = ref('')\r\nconst leftPosts = ref([])\r\nconst rightPosts = ref([])\r\n\r\n// 处理搜索\r\nconst handleSearch = () => {\r\n  console.log('搜索内容:', searchText.value)\r\n  // 这里添加搜索逻辑\r\n}\r\n\r\n// 处理点赞\r\nconst handleLike = (post) => {\r\n  post.isLiked = !post.isLiked\r\n  post.likes += post.isLiked ? 1 : -1\r\n}\r\n\r\n// 处理评论\r\nconst handleComment = (post) => {\r\n  console.log('评论帖子:', post.id)\r\n  // 这里添加评论逻辑\r\n}\r\n\r\n// 处理分享\r\nconst handleShare = (post) => {\r\n  uni.share({\r\n    provider: 'weixin',\r\n    scene: 'WXSceneSession',\r\n    type: 0,\r\n    title: post.content,\r\n    success: function (res) {\r\n      console.log('分享成功:', res)\r\n    },\r\n    fail: function (err) {\r\n      console.log('分享失败:', err)\r\n    }\r\n  })\r\n}\r\n\r\n// 处理发帖\r\nconst handleCreatePost = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/user/post'\r\n  })\r\n}\r\n\r\n// 预览图片\r\nconst previewImage = (images, current) => {\r\n  uni.previewImage({\r\n    urls: images,\r\n    current: images[current]\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  // 模拟从数据库获取数据\r\n  // 如果获取失败，使用初始数据\r\n  const allPosts = initialPosts\r\n  // 将帖子平均分配到左右两侧\r\n  const midIndex = Math.ceil(allPosts.length / 2)\r\n  leftPosts.value = allPosts.slice(0, midIndex)\r\n  rightPosts.value = allPosts.slice(midIndex)\r\n})\r\n</script>\r\n\r\n<style>\r\n.home-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #ffffff;\r\n  padding: 20rpx;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n  box-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.search-input {\r\n  width: 400rpx;\r\n  height: 60rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 30rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.post-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 60rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.posts-container {\r\n  margin-top: 100rpx;\r\n  padding: 20rpx;\r\n}\r\n\r\n.posts-grid {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.posts-column {\r\n  width: 48%;\r\n}\r\n\r\n.post-card {\r\n  background-color: #ffffff;\r\n  border-radius: 12rpx;\r\n  margin-bottom: 20rpx;\r\n  padding: 20rpx;\r\n  box-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.post-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.avatar {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  border-radius: 50%;\r\n}\r\n\r\n.user-info {\r\n  margin-left: 20rpx;\r\n}\r\n\r\n.username {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n.post-time {\r\n  font-size: 24rpx;\r\n  color: #999999;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.post-content {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.post-text {\r\n  font-size: 28rpx;\r\n  color: #333333;\r\n  line-height: 1.5;\r\n}\r\n\r\n.image-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.post-image {\r\n  width: 220rpx;\r\n  height: 220rpx;\r\n  margin-right: 10rpx;\r\n  margin-bottom: 10rpx;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.post-actions {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  border-top: 1rpx solid #eeeeee;\r\n  padding-top: 20rpx;\r\n}\r\n\r\n.action-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: none;\r\n  border: none;\r\n  font-size: 24rpx;\r\n  color: #666666;\r\n  padding: 0;\r\n}\r\n\r\n.action-btn.active {\r\n  color: #007AFF;\r\n}\r\n\r\n.action-btn text {\r\n  margin-left: 8rpx;\r\n}\r\n\r\n/* 图标字体 */\r\n@font-face {\r\n  font-family: 'iconfont';\r\n  src: url('//at.alicdn.com/t/font_xxx.woff2') format('woff2');\r\n}\r\n\r\n.iconfont {\r\n  font-family: 'iconfont';\r\n  font-size: 32rpx;\r\n}\r\n\r\n.icon-plus:before { content: '\\e6da'; }\r\n.icon-star:before { content: '\\e7df'; }\r\n.icon-comment:before { content: '\\e8e8'; }\r\n.icon-share:before { content: '\\e8b8'; }\r\n</style> ","import MiniProgramPage from 'D:/Git clone/TravelDiaryPlatform/app/rednote/pages/user/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onMounted","initialPosts","MiniProgramPage"],"mappings":";;;;;;AAoHA,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,aAAaA,cAAG,IAAC,EAAE;AAGzB,UAAM,eAAe,MAAM;AACzBC,oBAAA,MAAA,MAAA,OAAA,8BAAY,SAAS,WAAW,KAAK;AAAA,IAEvC;AAGA,UAAM,aAAa,CAAC,SAAS;AAC3B,WAAK,UAAU,CAAC,KAAK;AACrB,WAAK,SAAS,KAAK,UAAU,IAAI;AAAA,IACnC;AAGA,UAAM,gBAAgB,CAAC,SAAS;AAC9BA,oBAAY,MAAA,MAAA,OAAA,8BAAA,SAAS,KAAK,EAAE;AAAA,IAE9B;AAGA,UAAM,cAAc,CAAC,SAAS;AAC5BA,oBAAAA,MAAI,MAAM;AAAA,QACR,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,QACN,OAAO,KAAK;AAAA,QACZ,SAAS,SAAU,KAAK;AACtBA,wBAAAA,MAAA,MAAA,OAAA,8BAAY,SAAS,GAAG;AAAA,QACzB;AAAA,QACD,MAAM,SAAU,KAAK;AACnBA,wBAAAA,MAAA,MAAA,OAAA,8BAAY,SAAS,GAAG;AAAA,QACzB;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,mBAAmB,MAAM;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAGA,UAAM,eAAe,CAAC,QAAQ,YAAY;AACxCA,oBAAAA,MAAI,aAAa;AAAA,QACf,MAAM;AAAA,QACN,SAAS,OAAO,OAAO;AAAA,MAC3B,CAAG;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AAGd,YAAM,WAAWC,WAAY;AAE7B,YAAM,WAAW,KAAK,KAAK,SAAS,SAAS,CAAC;AAC9C,gBAAU,QAAQ,SAAS,MAAM,GAAG,QAAQ;AAC5C,iBAAW,QAAQ,SAAS,MAAM,QAAQ;AAAA,IAC5C,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLD,GAAG,WAAWC,SAAe;"}